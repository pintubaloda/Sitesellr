Sitesellr Cumulative Development Ledger (Latest)
Updated: 2026-02-18

New local package (pending push)
- Server-side validation hardening for governance/admin APIs
- DTO tightening with annotation-based validation for merchant lifecycle/onboarding, team management, invite acceptance, role templates, and backoffice/franchise inputs
- Idempotent governance migration file added: `backend-dotnet/Migrations/20260218142000_GovernanceTables.cs`
- New smoke verification checklist: `SMOKE_TEST_CHECKLIST_ADMIN.md`

Primary files changed
- backend-dotnet/Controllers/MerchantOpsController.cs
- backend-dotnet/Controllers/RoleTemplatesController.cs
- backend-dotnet/Controllers/StoreTeamController.cs
- backend-dotnet/Controllers/TeamInvitesController.cs
- backend-dotnet/Models/Audit.cs
- backend-dotnet/Migrations/20260218142000_GovernanceTables.cs
- SMOKE_TEST_CHECKLIST_ADMIN.md
- Requirestatus.txt
- github_commit.txt
- masterrequirement.docx (regenerated cumulative status)

Recent pushed baseline
- 0f4b927: governance + merchant ops + role templates + UI wiring

Update Entry: 2026-02-18 (Cumulative status format correction)
- Preserved previous details and appended main requirement matrix (Developed / Partial Developed / Need To Develop)
- Added comprehensive module-wise status mapping aligned with original Shopify-like scope
- Synced requirement artifacts format expectations for ongoing cumulative updates
- Files updated:
  - Requirestatus.txt
  - masterrequirement.txt
  - masterrequirement.docx

Update Entry: 2026-02-18 (Storefront CMS + Theme Engine)
- Added backend storefront domain models: theme catalog, store theme config, homepage layout, navigation menu, static pages
- Added Storefront APIs under `/api/stores/{storeId}/storefront/*`:
  - Theme list + apply with subscription plan gating for paid themes
  - Design settings upsert (logo/fav/header/footer/banner/tokens)
  - Homepage layout upsert (sections)
  - Navigation upsert (menu items)
  - Static pages CRUD (About/Contact/Policy/custom)
- Added platform owner theme catalog endpoints: `/api/platform/themes` (list/create)
- Added idempotent migration: `backend-dotnet/Migrations/20260218162000_StorefrontCmsThemeEngine.cs`
- Wired admin UI `/admin/store-builder` to real APIs (replaced mock theme/pages/navigation behavior)
- Added runtime seed for initial theme catalog if empty
- Files updated:
  - backend-dotnet/Models/Storefront.cs
  - backend-dotnet/Data/AppDbContext.cs
  - backend-dotnet/Controllers/StorefrontController.cs
  - backend-dotnet/Migrations/20260218162000_StorefrontCmsThemeEngine.cs
  - backend-dotnet/Program.cs
  - frontend/src/pages/admin/StoreBuilder.js
  - Requirestatus.txt
  - github_commit.txt
  - masterrequirement.txt
  - masterrequirement.docx

Update Entry: 2026-02-18 (Store Builder & Customization Expansion)
- Added public storefront runtime API/controller: `backend-dotnet/Controllers/PublicStorefrontController.cs`
- Added media upload + media asset listing APIs in storefront module (`/storefront/media/upload`, `/storefront/media`)
- Added B2B visibility settings on storefront config (`ShowPricing`, `LoginToViewPrice`, `CatalogMode`, `CatalogVisibilityJson`)
- Added media asset entity + DB mapping (`StoreMediaAsset`) and migration `20260218170000_StorefrontPublicB2BMedia.cs`
- Enabled static file serving for uploaded assets in backend runtime
- Added platform theme management UI page `/admin/platform-themes`
- Added public storefront frontend runtime page `/s/:subdomain/*`
- Upgraded Store Builder UI with:
  - section reorder + widget settings editor
  - B2B visibility controls
  - logo/favicon file upload wiring
- Files updated:
  - backend-dotnet/Controllers/PublicStorefrontController.cs
  - backend-dotnet/Controllers/StorefrontController.cs
  - backend-dotnet/Models/Storefront.cs
  - backend-dotnet/Data/AppDbContext.cs
  - backend-dotnet/Migrations/20260218170000_StorefrontPublicB2BMedia.cs
  - backend-dotnet/Program.cs
  - frontend/src/pages/storefront/StorefrontPublic.js
  - frontend/src/pages/admin/PlatformThemes.js
  - frontend/src/pages/admin/StoreBuilder.js
  - frontend/src/App.js
  - frontend/src/components/layouts/DashboardLayout.js
  - Requirestatus.txt
  - github_commit.txt
  - masterrequirement.txt
  - masterrequirement.docx

Update Entry: 2026-02-18 (Custom Domain + Free SSL utility)
- Added domain SSL model and persistence: `StoreDomain`
- Added SSL provider abstraction + free SSL shell provider:
  - `backend-dotnet/Services/SslService.cs`
  - `ISslProvider`, `ISslProviderFactory`, `LetsEncryptShellProvider`
- Added store domain/SSL APIs:
  - `GET/POST /api/stores/{storeId}/domains`
  - `POST /api/stores/{storeId}/domains/{domainId}/verify`
  - `POST /api/stores/{storeId}/domains/{domainId}/issue-ssl`
- Added admin UI for domain + SSL operations: `/admin/domains-ssl`
- Added migration: `backend-dotnet/Migrations/20260218175500_StoreDomainsFreeSsl.cs`
- Runtime startup SQL updated for `store_domains` table/indexes
- Note: actual Let's Encrypt issuance is command-driven and requires infra env setup:
  - `SSL_ISSUER_COMMAND` (example acme/certbot command template with `{domain}` `{email}`)
  - `SSL_CONTACT_EMAIL`
- Files updated:
  - backend-dotnet/Models/Storefront.cs
  - backend-dotnet/Data/AppDbContext.cs
  - backend-dotnet/Services/SslService.cs
  - backend-dotnet/Controllers/DomainSslController.cs
  - backend-dotnet/Migrations/20260218175500_StoreDomainsFreeSsl.cs
  - backend-dotnet/Program.cs
  - frontend/src/pages/admin/DomainsSsl.js
  - frontend/src/App.js
  - frontend/src/components/layouts/DashboardLayout.js
  - Requirestatus.txt
  - github_commit.txt
  - masterrequirement.txt
  - masterrequirement.docx

Fix Entry: 2026-02-18 (CI compile fix for commit a11d081)
- Fixed invalid escape usage in migration `backend-dotnet/Migrations/20260218162000_StorefrontCmsThemeEngine.cs`
- Replaced `\"` with doubled quotes `""` inside verbatim SQL strings to resolve C# compile errors (newline in constant / unexpected '\\')

Fix Entry: 2026-02-18 (CI compile fix for commit 6d36a56)
- Fixed verbatim SQL escaping in `backend-dotnet/Migrations/20260218170000_StorefrontPublicB2BMedia.cs`
- Replaced `\"` with `""` in SQL string block to remove C# parser errors
